

<% unless logged_in? %>
  <div class="note"><div><p>Welcome. This API provides programmers with structured access to all the data on OpenCongress, everything from official bill info to news and blog coverage to user-generated votes on bills and much more. As an open-source public resource on Congress, we encourage developers to share and remix any of this info on their own websites to keep their online communities up-to-date with their political interests.</p> 
  
  <p>Using the API requires an API KEY, which is automatically assigned to every free "My OpenCongress" account -- simply <a href="/register">join</a> or <a href="/login">login</a>, it takes less than a minute, and your key will appear here, along with sample links to call. The data below is just a start -- we will continually add more unique info & useful enhancements in order to contribute public knowledge about Congress back to the data commons on the open Web. We're always interested in hearing requests or seeing use cases of how you're using this API -- see the Developer Resources at the bottom of this page.</p>
  
  You are not logged in.  The API requires an API KEY, which would be displayed here and in the sample links if you were logged in.</div></div>

<div id="heading">

<h2>OpenCongress API Documentation</h2>

</div>
<% else %>
<div id="heading">

<h2>OpenCongress API Documentation</h2>

</div>
  <div class="key">
  <p id="find"><a href="#" class="med_button"><span>Copy to Clipboard</span></a>Your Unique API Key: <strong><%= @api_key %></strong></p>
  <p>Welcome. This API provides programmers with structured access to all the data on OpenCongress, everything from official bill info to news and blog coverage to user-generated votes on bills and much more. The data below is just a start -- we will continually add more unique info & useful enhancements in order to contribute public knowledge about Congress back to the data commons on the open Web. We're always interested in hearing requests or seeing use cases of how you're using this API -- see the Developer Resources at the bottom of this page.</p>
  <p>Please do not share your API key. This API defaults to returning XML.  All queries (except queries to our "Battle Royale" user-generated info, for now) can also return JSON by specifying: format=json as a parameter in the url. The API also defaults to returning 30 results.  You can pass the per_page variable to decrease this (30 is the max), and the page variable to flip through pages.</p>
  </div>
<% end %>


<div class="people_section">

<h3>People API</h3>
<p>The people API is used to query the system for individuals, or groups of people matching given criteria.  The following describes the parameters that can be used.</p>


<dl>
  <dt>First Name (first_name)</dt>
  <dd>
      Specify the first name of the person<br/>
      <%= link_to "#{BASE_URL}api/people?first_name=John&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :first_name => "John" %>
  </dd>
<dt>Last Name (last_name)</dt>
<dd>
    Specify the last name of the person<br/>
    <%= link_to "#{BASE_URL}api/people?last_name=Kerry&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :last_name => "Kerry" %>
</dd>
  <dt>OpenCongress ID (person_id)</dt>
  <dd>
      Specify the id of the person<br/>
      <%= link_to "#{BASE_URL}api/people?id=300056&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :person_id => "300056" %>
  </dd>
<dt>Gender (gender)</dt>
<dd>
    Specify the gender of the person, either 'M' or 'F'<br/>
    <%= link_to "#{BASE_URL}api/people?gender=M&last_name=Kennedy&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :gender => "M", :last_name => "Kennedy" %>
</dd>
<dt>State (state)</dt>
<dd>
    Specify the two letter state of the person<br/>
    <%= link_to "#{BASE_URL}api/people?first_name=John&state=AZ&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :first_name => "John", :state => "AZ" %>
</dd>
<dt>District (district)</dt>
<dd>
    Specify the congressional district of the person<br/>
    <%= link_to "#{BASE_URL}api/people?district=1&state=FL&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :district => "1", :state => "FL" %>
</dd>
<dt>Party (party)</dt>
<dd>
    Specify the political party of the person, either 'Republican', 'Democrat', or 'Independent'<br/>
    <%= link_to "#{BASE_URL}api/people?party=Republican&state=FL&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :party => "Republican", :state => "FL" %>
</dd>
<dt>User Approval Range (user_approval_from, user_approval_to)</dt>
<dd>
    Specify an average OpenCongress user approval rating range (0.0 to 10.0)<br/>
    <%= link_to "#{BASE_URL}api/people?user_approval_from=5.0&user_approval_to=10.0&key=#{@api_key}", :controller => "api", :key => @api_key, :action => "people", :user_approval_from => "5.0", :user_approval_to => "10.0" %>
</dd>

  <dt>Senators most in the news this week</dt>
  <dd>
     <%= link_to "#{BASE_URL}api/senators_most_in_the_news_this_week?key=#{@api_key}", "/api/senators_most_in_the_news_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Representatives most in the news this week</dt>
  <dd>
     <%= link_to "#{BASE_URL}api/representatives_most_in_the_news_this_week?key=#{@api_key}", "/api/representatives_most_in_the_news_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Most blogged Senators this week</dt>
  <dd>
     <%= link_to "#{BASE_URL}api/most_blogged_senators_this_week?key=#{@api_key}", "/api/most_blogged_senators_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Most blogged Representatives this week</dt>
  <dd>
     <%= link_to "#{BASE_URL}api/most_blogged_representatives_this_week?key=#{@api_key}", "/api/most_blogged_representatives_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Compare Two People</dt>
  <dd>Specify the ID's of two people to compare, and receive XML of their roll call vote comparisons.<br/>
    <%= link_to "#{BASE_URL}person/compare.xml?person1=300001&person2=300013&key=#{@api_key}", "/person/compare.xml?person1=300001&person2=300013&key=#{@api_key}" %>
  </dd>

  <dt>People Approved of by Open Congress Users are Also</dt>
  <dd>
     Returns bills, representatives, and senators supported and opposed by users's approving of a given person.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_supporting_person_are_also/300060?key=#{@api_key}", "/api/opencongress_users_supporting_person_are_also/300060?key=#{@api_key}" %>
  </dd>

  <dt>People Disapproved of by Open Congress Users are Also</dt>
  <dd>
     Returns bills, representatives, and senators supported and opposed by users's disapproving of a given person.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_opposing_person_are_also/300060?key=#{@api_key}", "/api/opencongress_users_opposing_person_are_also/300060?key=#{@api_key}" %>
  </dd>

  <dt>Open Congress Users tracking person are also tracking</dt>
  <dd>
     Returns bills, people, and issues commonly tracked by people tracking a given person.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_tracking_person_are_also_tracking/300060?key=#{@api_key}", "/api/opencongress_users_tracking_person_are_also_tracking/300060?key=#{@api_key}" %>
  </dd>


</dl>
</div>


<div class="bills_section">
<h3>Bills API</h3>
<p>The Bills API is used to query OpenCongress for bills matching given criteria.  The following describes the functions and parameters that can be used.</p>

<dl>

  <dt>Bills by session of congress</dt>
  <dd>
    Returns bills matching the given congress.<br/>
    <%= link_to "#{BASE_URL}api/bills?congress=#{DEFAULT_CONGRESS}&key=#{@api_key}", "/api/bills?congress=#{DEFAULT_CONGRESS}&key=#{@api_key}" %>
  </dd>

  <dt>Bills by type</dt>
  <dd>
    Returns bills matching the given type.  Type can be: h (house), 
    s (senate), hj (house joint resolution), sj (senate joint resolution), hc (house concurrent resolution)
    sc (senate concurrent resolution), hr (house resolution), sr (senate resolution) <br/>
    <%= link_to "#{BASE_URL}api/bills?type=h&congress=#{DEFAULT_CONGRESS}&key=#{@api_key}", "/api/bills?type=h&congress=#{DEFAULT_CONGRESS}&key=#{@api_key}" %>
  </dd>

  <dt>Bills by number</dt>
  <dd>
    Returns bills matching the given number.<br/>
    <%= link_to "#{BASE_URL}api/bills?number=5749&type=h&congress=#{DEFAULT_CONGRESS}&key=#{@api_key}", "/api/bills?number=5749&type=h&congress=#{DEFAULT_CONGRESS}&key=#{@api_key}" %>
  </dd>
  
  <dt>Bills by ident</dt>
  <dd>
    Returns bills matching the given OpenCongress identification strings.<br/>
    <%= link_to "#{BASE_URL}api/bills_by_ident?ident[]=110-s1178&ident[]=110-s239&key=#{@api_key}", "/api/bills_by_ident?ident[]=110-s1178&ident[]=110-s239&key=#{@api_key}" %>
  </dd>

  <dt>Bills Introduced Since</dt>
  <dd>
    Returns bills that were introduced since the supplied date (30 at a time).<br/>
    <%= link_to "#{BASE_URL}api/bills_introduced_since?date=Jan 30th, 2009&key=#{@api_key}", "/api/bills_introduced_since?date=Jan 30th, 2009&key=#{@api_key}" %>
  </dd>
  

  <dt>Bills by Query</dt>
  <dd>
    Returns bills matching a text query.<br/>
    <%= link_to "#{BASE_URL}api/bills_by_query?key=#{@api_key}&q=Global Poverty Act of 2007", "/api/bills_by_query?key=#{@api_key}&q=Global Poverty Act of 2007" %>
  </dd>

  <dt>Hot Bills</dt>
  <dd>
    Returns bills that OpenCongress editors feel are "hot".<br/>
    <%= link_to "#{BASE_URL}api/hot_bills?key=#{@api_key}", "/api/hot_bills?key=#{@api_key}" %>
  </dd>

  <dt>Most Blogged Bills this Week</dt>
  <dd>
     Returns the most bills most blogged about this week.<br/>
    <%= link_to "#{BASE_URL}api/most_blogged_bills_this_week?key=#{@api_key}", "/api/most_blogged_bills_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Bills Most in the News this Week</dt>
  <dd>
     Returns the most bills most reported on by news agencies this week.<br/>
    <%= link_to "#{BASE_URL}api/bills_in_the_news_this_week?key=#{@api_key}", "/api/bills_in_the_news_this_week?key=#{@api_key}" %>
  </dd>
  
  <dt>Most Tracked Bills this Week</dt>
  <dd>
     Returns the most bills most tracked by OpenCongress Users this week.<br/>
    <%= link_to "#{BASE_URL}api/most_tracked_bills_this_week?key=#{@api_key}", "/api/most_tracked_bills_this_week?key=#{@api_key}" %>
  </dd>
  
  <dt>Most Supported Bills this Week</dt>
  <dd>
     Returns the most bills most supported by OpenCongress Users this week.<br/>
     <%= link_to "#{BASE_URL}api/most_supported_bills_this_week?key=#{@api_key}", "/api/most_supported_bills_this_week?key=#{@api_key}" %>
  </dd>

  <dt>Most Opposed Bills this Week</dt>
  <dd>
     Returns the most bills most opposed by OpenCongress Users this week.<br/>
     <%= link_to "#{BASE_URL}api/most_opposed_bills_this_week?key=#{@api_key}", "/api/most_opposed_bills_this_week?key=#{@api_key}" %>
  </dd>
  
  <dt>Bills Supported by Open Congress Users are Also</dt>
  <dd>
     Returns bills, representatives, and senators supported and opposed by users's supporting a given bill.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_supporting_bill_are_also/111-s1?key=#{@api_key}", "/api/opencongress_users_supporting_bill_are_also/111-s1?key=#{@api_key}" %>
  </dd>

  <dt>Bills Opposed by Open Congress Users are Also</dt>
  <dd>
     Returns bills, representatives, and senators supported and opposed by users's opposing a given bill.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_opposing_bill_are_also/111-s1?key=#{@api_key}", "/api/opencongress_users_opposing_bill_are_also/111-s1?key=#{@api_key}" %>
  </dd>

  <dt>Open Congress Users tracking bill are also tracking</dt>
  <dd>
     Returns bills, people, and issues commonly tracked by people tracking a given bill.<br/>
    <%= link_to "#{BASE_URL}api/opencongress_users_tracking_bill_are_also_tracking/111-s1?key=#{@api_key}", "/api/opencongress_users_tracking_bill_are_also_tracking/111-s1?key=#{@api_key}" %>
  </dd>
  

</dl>
</div>



<div class="rollcall_section">
<h3>Roll Calls</h3>

<dl>

  <dt>Roll Calls by Bills</dt>
  <dd>
    Returns the roll calls for a given list of bills.<br/>
    <%= link_to "#{BASE_URL}api/bill_roll_calls?bill_id[]=51865&bill_id[]=51868&key=#{@api_key}", "/api/bill_roll_calls?bill_id[]=51865&bill_id[]=51868&key=#{@api_key}" %>
  </dd>
      
</dl>
</div>


<div class="issues_section">
<h3>Issues</h3>

<dl>

  <dt>Issues by Keyword</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}api/issues_by_keyword?keyword=Privacy&key=#{@api_key}", "/api/issues_by_keyword?keyword=Privacy&key=#{@api_key}" %>
  </dd>


</dl>
</div>




<div class="semantic_wiki">
<h3>Wiki APIs</h3>

<dl>

  <dt>OpenCongress Semantic MediaWiki API</dt>
  <dd>
    Here is the API for query strings on wiki data, as well as help with writing query language. We'll be doing more extensive documentation of how to use Semantic MediaWiki and the data available through this API soon. <br/>
 <a href="http://www.opencongress.org/wiki/Special:Ask">http://www.opencongress.org/wiki/Special:Ask</a>
  </dd>


  <dt>Semantic MediaWiki Data </dt>
  <dd>
Here is the page to retrieve all the data on the OpenCongress Wiki, including a simpler query string format. Further documentation of data offerings to come. <br/>
 <a href="http://www.opencongress.org/wiki/Special:GetData">http://www.opencongress.org/wiki/Special:GetData</a>
  </dd>

      
</dl>

</div>







<div class="br_section">
<h3>Battle Royale</h3>
<p>The Battle Royale API shows 30 bills, people, or issues based on the query you provide.  The easiest way to construct a query is to simply visit the <%= link_to "Battle Royale", :controller => "battle_royale", :key => @api_key, :action => "index" %> with a browser, browse to the data you'd want to extract, and click the "XML" button.  You can also build queries from the following information.</p>

<p style="font-weight:bold;">All Battle Royale queries take the following parameters:</p>
<table cellpadding="0" cellspacing="0">

  <tr><th class="border-right">Parameter</th><th>Possible Values</th></tr>
  <tr class="<%= cycle('odd', 'even') %>"><td><span>timeframe</span></td>
    <td>
<table cellpadding="0" cellspacing="0">
<tr><th>value</th><th>description</th></tr>
      <tr><td>1day</td><td>One Day</td></tr>
      <tr><td>5days</td><td>Five Days</td></tr>
      <tr><td>30days</td><td>Thirty Days</td></tr>
      <tr><td>1year</td><td>One Year</td></tr>


      </table>
    </td>
  </tr>
  <tr class="<%= cycle('odd', 'even') %>"><td><span>page</span></td>
    <td>
<table cellpadding="0" cellspacing="0">
<tr><th>value</th><th>description</th></tr>
      <tr><td>integer</td><td>The Page Number (1,2,3,4,etc.)</td></tr>
      </table>
    </td>
  </tr>
  <tr class="<%= cycle('odd', 'even') %>"><td><span>order</span></td>
    <td>
<table cellpadding="0" cellspacing="0">
<tr><th>value</th><th>description</th></tr>
      <tr><td>asc</td><td>Ascending</td></tr>
      <tr><td>desc</td><td>Descending</td></tr>
      </table>
    </td>
  </tr>

</table>
<br/>

<p style="font-weight:bold;">Bill Queries support the following parameters:</p>

<table cellpadding="0" cellspacing="0">
  <tr><th class="border-right">Parameter</th><th>Possible Values</th></tr>

  <tr class="<%= cycle('odd', 'even') %>"><td><span>sort</span></td><td>
<table cellpadding="0" cellspacing="0">
     <tr><th>value</th><th>description</th></tr>
     <tr><td>vote_count_1</td><td>Total Number of User Votes</td></tr>
     <tr><td>current_support_pb</td><td>Total Number of User Votes Supporting</td></tr>
     <tr><td>current_support_pb</td><td>Total Number of User Votes Opposing</td></tr>
     <tr><td>bookmark_count_1</td><td>Total Number of Users Tracking</td></tr>
     <tr><td>total_comments</td><td>Total Number of User Comments</td></tr>
     </table>
    </td>
    </tr>
</table>
<br/>

<p style="font-weight:bold;">Senator and Representative Queries support the following parameters:</p>

<table cellpadding="0" cellspacing="0">
  <tr><th class="border-right">Parameter</th><th>Possible Values</th></tr>

  <tr class="<%= cycle('odd', 'even') %>"><td><span>sort</span></td><td>
<table cellpadding="0" cellspacing="0">
     <tr><th>value</th><th>description</th></tr>
     <tr><td>p_approval_count</td><td>Total Number of User Votes</td></tr>
     <tr><td>p_approval_avg</td><td>Average Approval Rating</td></tr>
     <tr><td>bookmark_count_1</td><td>Total Number of Users Tracking</td></tr>
     <tr><td>total_comments</td><td>Total Number of User Comments</td></tr>
     </table>
    </td>
    </tr>
</table>

<br/>

<p style="font-weight:bold;">Issue Queries support the following parameters:</p>

<table cellpadding="0" cellspacing="0">
  <tr><th class="border-right">Parameter</th><th>Possible Values</th></tr>

  <tr class="<%= cycle('odd', 'even') %>"><td><span>sort</span></td><td>
<table cellpadding="0" cellspacing="0">
     <tr><th>value</th><th>description</th></tr>
     <tr><td>bookmark_count_1</td><td>Total Number of Users Tracking</td></tr>
     <tr><td>total_comments</td><td>Total Number of User Comments</td></tr>
     </table>
    </td>
    </tr>
</table>
<br/>

<p style="font-weight:bold;">Sample Battle Royale Queries:</p>

<dl>

  <dt>Bills, 30 days, sorted by total comments descending</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}battle_royale.xml?key=#{@api_key}&order=desc&page=1&sort=total_comments&timeframe=30days", "/battle_royale.xml?key=#{@api_key}&order=desc&page=1&sort=total_comments&timeframe=30days" %>
  </dd>


  <dt>Bills, 30 days, sorted by total users tracking descending</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}battle_royale.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=30days", "/battle_royale.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=30days" %>
  </dd>

  <dt>Representatives, 5 days, sorted by total users tracking descending</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}battle_royale/representatives.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=5days", "/battle_royale/representatives.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=5days" %>
  </dd>

  <dt>Senators, 1 year, sorted by average approval rating descending</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}battle_royale/senators.xml?key=#{@api_key}&order=desc&page=1&sort=p_approval_avg&timeframe=1year", "/battle_royale/senators.xml?key=#{@api_key}&order=desc&page=1&sort=p_approval_avg&timeframe=1year" %>
  </dd>

  <dt>Issues, 30 days, sorted by total users tracking descending</dt>
  <dd>
    Specify a Keyword, and receive an array of issue areas that match the keyword.<br/>
    <%= link_to "#{BASE_URL}battle_royale/issues.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=30days", "/battle_royale/issues.xml?key=#{@api_key}&order=desc&page=1&sort=bookmark_count_1&timeframe=30days" %>
  </dd>

</dl>
</div>

<div class="dev_resources">
<h3>OpenCongress Developer Resources</h3> 
<ul class="star"> 
<li class="top-star">To ask questions about the API, suggest enhancements, report bugs, or let us know how you're using data from our API, send us an email: <a href="mailto:writeus@opencongress.org">writeus@opencongress.org</a></li> 
<li class="top-star">To sign up for general site updates over e-mail: <a href="http://list.opencongress.org/?p=subscribe">OpenCongress mailing list</a> (low-volume, major announcements only).</li>
<li class="top-star">To subscribe to updates via RSS: <a href="http://feeds.feedburner.com/OpenCongressCongressGossipBlog">Blog RSS feed</a>.</li> <li class="top-star">To sign up for detailed programming updates over e-mail: <a href="http://lists.ppolitics.org/listinfo.cgi/develop-ppolitics.org">Site development list-serv</a>.</li> 
<li class="top-star">To join an associated Google Group: <a href="http://groups.google.com/group/sunlightlabs">Sunlight Labs</a>, <a href="http://wiki.sunlightlabs.com/index.php/OpenCongress">Sunlight Wiki</a></li> <li class="top-star">To chat with our open-source development team over IRC: #opencongress on irc.freenode.net.</li>
<li class="top-star">To check out our site code: <a href="http://github.com/opencongress/opencongress/tree/master">GitHub</a> page</li> <li class="top-star">To file a bug report, interface improvement, data source, or feature suggestion: <a href="http://trac.opencongress.org/">Trac project homepage</a>.</li> 
</ul> 
</div>


